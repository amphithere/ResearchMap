!function(t){"use strict";var e=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,i=t.Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}(),n=i&&t.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),o=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,s=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,r=(i||o)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(t){var e,r,a,l,u,h,c,d,p;if(e=t.match(s),!e)throw new Error("invalid data URI");for(r=e[2]?e[1]:"text/plain"+(e[3]||";charset=US-ASCII"),a=!!e[4],l=t.slice(e[0].length),u=a?atob(l):decodeURIComponent(l),h=new ArrayBuffer(u.length),c=new Uint8Array(h),d=0;d<u.length;d+=1)c[d]=u.charCodeAt(d);return i?new Blob([n?c:h],{type:r}):(p=new o,p.append(h),p.getBlob(r))};t.HTMLCanvasElement&&!e.toBlob&&(e.mozGetAsFile?e.toBlob=function(t,i,n){t(n&&e.toDataURL&&r?r(this.toDataURL(i,n)):this.mozGetAsFile("blob",i))}:e.toDataURL&&r&&(e.toBlob=function(t,e,i){t(r(this.toDataURL(e,i)))})),"function"==typeof define&&define.amd?define(function(){return r}):"object"==typeof module&&module.exports?module.exports=r:t.dataURLtoBlob=r}(window),!function(t){"use strict";var e=function(t,i,n){var o,s,r=document.createElement("img");if(r.onerror=i,r.onload=function(){!s||n&&n.noRevoke||e.revokeObjectURL(s),i&&i(e.scale(r,n))},e.isInstanceOf("Blob",t)||e.isInstanceOf("File",t))o=s=e.createObjectURL(t),r._type=t.type;else{if("string"!=typeof t)return!1;o=t,n&&n.crossOrigin&&(r.crossOrigin=n.crossOrigin)}return o?(r.src=o,r):e.readFile(t,function(t){var e=t.target;e&&e.result?r.src=e.result:i&&i(t)})},i=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;e.isInstanceOf=function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},e.transformCoordinates=function(){},e.getTransformedOptions=function(t,e){var i,n,o,s,r=e.aspectRatio;if(!r)return e;i={};for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);return i.crop=!0,o=t.naturalWidth||t.width,s=t.naturalHeight||t.height,o/s>r?(i.maxWidth=s*r,i.maxHeight=s):(i.maxWidth=o,i.maxHeight=o/r),i},e.renderImageToCanvas=function(t,e,i,n,o,s,r,a,l,u){return t.getContext("2d").drawImage(e,i,n,o,s,r,a,l,u),t},e.hasCanvasOption=function(t){return t.canvas||t.crop||!!t.aspectRatio},e.scale=function(t,i){function n(){var t=Math.max((a||b)/b,(l||w)/w);t>1&&(b*=t,w*=t)}function o(){var t=Math.min((s||b)/b,(r||w)/w);1>t&&(b*=t,w*=t)}i=i||{};var s,r,a,l,u,h,c,d,p,f,m,g=document.createElement("canvas"),v=t.getContext||e.hasCanvasOption(i)&&g.getContext,_=t.naturalWidth||t.width,y=t.naturalHeight||t.height,b=_,w=y;if(v&&(i=e.getTransformedOptions(t,i),c=i.left||0,d=i.top||0,i.sourceWidth?(u=i.sourceWidth,void 0!==i.right&&void 0===i.left&&(c=_-u-i.right)):u=_-c-(i.right||0),i.sourceHeight?(h=i.sourceHeight,void 0!==i.bottom&&void 0===i.top&&(d=y-h-i.bottom)):h=y-d-(i.bottom||0),b=u,w=h),s=i.maxWidth,r=i.maxHeight,a=i.minWidth,l=i.minHeight,v&&s&&r&&i.crop?(b=s,w=r,m=u/h-s/r,0>m?(h=r*u/s,void 0===i.top&&void 0===i.bottom&&(d=(y-h)/2)):m>0&&(u=s*h/r,void 0===i.left&&void 0===i.right&&(c=(_-u)/2))):((i.contain||i.cover)&&(a=s=s||a,l=r=r||l),i.cover?(o(),n()):(n(),o())),v){if(p=i.pixelRatio,p>1&&(g.style.width=b+"px",g.style.height=w+"px",b*=p,w*=p,g.getContext("2d").scale(p,p)),f=i.downsamplingRatio,f>0&&1>f&&u>b&&h>w)for(;u*f>b;)g.width=u*f,g.height=h*f,e.renderImageToCanvas(g,t,c,d,u,h,0,0,g.width,g.height),u=g.width,h=g.height,t=document.createElement("canvas"),t.width=u,t.height=h,e.renderImageToCanvas(t,g,0,0,u,h,0,0,u,h);return g.width=b,g.height=w,e.transformCoordinates(g,i),e.renderImageToCanvas(g,t,c,d,u,h,0,0,b,w)}return t.width=b,t.height=w,t},e.createObjectURL=function(t){return i?i.createObjectURL(t):!1},e.revokeObjectURL=function(t){return i?i.revokeObjectURL(t):!1},e.readFile=function(t,e,i){if(window.FileReader){var n=new FileReader;if(n.onload=n.onerror=e,i=i||"readAsDataURL",n[i])return n[i](t),n}return!1},"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof module&&module.exports?module.exports=e:t.loadImage=e}(window),function(t){"use strict";"function"==typeof define&&define.amd?define(["load-image"],t):t("object"==typeof module&&module.exports?require("./load-image"):window.loadImage)}(function(t){"use strict";var e=t.hasCanvasOption,i=t.transformCoordinates,n=t.getTransformedOptions;t.hasCanvasOption=function(i){return!!i.orientation||e.call(t,i)},t.transformCoordinates=function(e,n){i.call(t,e,n);var o=e.getContext("2d"),s=e.width,r=e.height,a=e.style.width,l=e.style.height,u=n.orientation;if(u&&!(u>8))switch(u>4&&(e.width=r,e.height=s,e.style.width=l,e.style.height=a),u){case 2:o.translate(s,0),o.scale(-1,1);break;case 3:o.translate(s,r),o.rotate(Math.PI);break;case 4:o.translate(0,r),o.scale(1,-1);break;case 5:o.rotate(.5*Math.PI),o.scale(1,-1);break;case 6:o.rotate(.5*Math.PI),o.translate(0,-r);break;case 7:o.rotate(.5*Math.PI),o.translate(s,-r),o.scale(-1,1);break;case 8:o.rotate(-.5*Math.PI),o.translate(-s,0)}},t.getTransformedOptions=function(e,i){var o,s,r=n.call(t,e,i),a=r.orientation;if(!a||a>8||1===a)return r;o={};for(s in r)r.hasOwnProperty(s)&&(o[s]=r[s]);switch(r.orientation){case 2:o.left=r.right,o.right=r.left;break;case 3:o.left=r.right,o.top=r.bottom,o.right=r.left,o.bottom=r.top;break;case 4:o.top=r.bottom,o.bottom=r.top;break;case 5:o.left=r.top,o.top=r.left,o.right=r.bottom,o.bottom=r.right;break;case 6:o.left=r.top,o.top=r.right,o.right=r.bottom,o.bottom=r.left;break;case 7:o.left=r.bottom,o.top=r.right,o.right=r.top,o.bottom=r.left;break;case 8:o.left=r.bottom,o.top=r.left,o.right=r.top,o.bottom=r.right}return r.orientation>4&&(o.maxWidth=r.maxHeight,o.maxHeight=r.maxWidth,o.minWidth=r.minHeight,o.minHeight=r.minWidth,o.sourceWidth=r.sourceHeight,o.sourceHeight=r.sourceWidth),o}}),function(t){"use strict";"function"==typeof define&&define.amd?define(["load-image"],t):t("object"==typeof module&&module.exports?require("./load-image"):window.loadImage)}(function(t){"use strict";var e=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);t.blobSlice=e&&function(){var t=this.slice||this.webkitSlice||this.mozSlice;return t.apply(this,arguments)},t.metaDataParsers={jpeg:{65505:[]}},t.parseMetaData=function(e,i,n){n=n||{};var o=this,s=n.maxMetaDataSize||262144,r={},a=!(window.DataView&&e&&e.size>=12&&"image/jpeg"===e.type&&t.blobSlice);(a||!t.readFile(t.blobSlice.call(e,0,s),function(e){if(e.target.error)return console.log(e.target.error),void i(r);var s,a,l,u,h=e.target.result,c=new DataView(h),d=2,p=c.byteLength-4,f=d;if(65496===c.getUint16(0)){for(;p>d&&(s=c.getUint16(d),s>=65504&&65519>=s||65534===s);){if(a=c.getUint16(d+2)+2,d+a>c.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(l=t.metaDataParsers.jpeg[s])for(u=0;u<l.length;u+=1)l[u].call(o,c,d,a,r,n);d+=a,f=d}!n.disableImageHead&&f>6&&(h.slice?r.imageHead=h.slice(0,f):r.imageHead=new Uint8Array(h).subarray(0,f))}else console.log("Invalid JPEG file: Missing JPEG marker.");i(r)},"readAsArrayBuffer"))&&i(r)}}),function(t){"use strict";"function"==typeof define&&define.amd?define(["load-image","load-image-meta"],t):"object"==typeof module&&module.exports?t(require("./load-image"),require("./load-image-meta")):t(window.loadImage)}(function(t){"use strict";t.ExifMap=function(){return this},t.ExifMap.prototype.map={Orientation:274},t.ExifMap.prototype.get=function(t){return this[t]||this[this.map[t]]},t.getExifThumbnail=function(t,e,i){var n,o,s;if(!i||e+i>t.byteLength)return void console.log("Invalid Exif data: Invalid thumbnail data.");for(n=[],o=0;i>o;o+=1)s=t.getUint8(e+o),n.push((16>s?"0":"")+s.toString(16));return"data:image/jpeg,%"+n.join("%")},t.exifTagTypes={1:{getValue:function(t,e){return t.getUint8(e)},size:1},2:{getValue:function(t,e){return String.fromCharCode(t.getUint8(e))},size:1,ascii:!0},3:{getValue:function(t,e,i){return t.getUint16(e,i)},size:2},4:{getValue:function(t,e,i){return t.getUint32(e,i)},size:4},5:{getValue:function(t,e,i){return t.getUint32(e,i)/t.getUint32(e+4,i)},size:8},9:{getValue:function(t,e,i){return t.getInt32(e,i)},size:4},10:{getValue:function(t,e,i){return t.getInt32(e,i)/t.getInt32(e+4,i)},size:8}},t.exifTagTypes[7]=t.exifTagTypes[1],t.getExifValue=function(e,i,n,o,s,r){var a,l,u,h,c,d,p=t.exifTagTypes[o];if(!p)return void console.log("Invalid Exif data: Invalid tag type.");if(a=p.size*s,l=a>4?i+e.getUint32(n+8,r):n+8,l+a>e.byteLength)return void console.log("Invalid Exif data: Invalid data offset.");if(1===s)return p.getValue(e,l,r);for(u=[],h=0;s>h;h+=1)u[h]=p.getValue(e,l+h*p.size,r);if(p.ascii){for(c="",h=0;h<u.length&&(d=u[h],"\x00"!==d);h+=1)c+=d;return c}return u},t.parseExifTag=function(e,i,n,o,s){var r=e.getUint16(n,o);s.exif[r]=t.getExifValue(e,i,n,e.getUint16(n+2,o),e.getUint32(n+4,o),o)},t.parseExifTags=function(t,e,i,n,o){var s,r,a;if(i+6>t.byteLength)return void console.log("Invalid Exif data: Invalid directory offset.");if(s=t.getUint16(i,n),r=i+2+12*s,r+4>t.byteLength)return void console.log("Invalid Exif data: Invalid directory size.");for(a=0;s>a;a+=1)this.parseExifTag(t,e,i+2+12*a,n,o);return t.getUint32(r,n)},t.parseExifData=function(e,i,n,o,s){if(!s.disableExif){var r,a,l,u=i+10;if(1165519206===e.getUint32(i+4)){if(u+8>e.byteLength)return void console.log("Invalid Exif data: Invalid segment size.");if(0!==e.getUint16(i+8))return void console.log("Invalid Exif data: Missing byte alignment offset.");switch(e.getUint16(u)){case 18761:r=!0;break;case 19789:r=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==e.getUint16(u+2,r))return void console.log("Invalid Exif data: Missing TIFF marker.");a=e.getUint32(u+4,r),o.exif=new t.ExifMap,a=t.parseExifTags(e,u,u+a,r,o),a&&!s.disableExifThumbnail&&(l={exif:{}},a=t.parseExifTags(e,u,u+a,r,l),l.exif[513]&&(o.exif.Thumbnail=t.getExifThumbnail(e,u+l.exif[513],l.exif[514]))),o.exif[34665]&&!s.disableExifSub&&t.parseExifTags(e,u,u+o.exif[34665],r,o),o.exif[34853]&&!s.disableExifGps&&t.parseExifTags(e,u,u+o.exif[34853],r,o)}}},t.metaDataParsers.jpeg[65505].push(t.parseExifData)}),function(t){"use strict";"function"==typeof define&&define.amd?define(["load-image","load-image-exif"],t):"object"==typeof module&&module.exports?t(require("./load-image"),require("./load-image-exif")):t(window.loadImage)}(function(t){"use strict";t.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},t.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},t.ExifMap.prototype.getText=function(t){var e=this.get(t);switch(t){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[t][e];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(e[0],e[1],e[2],e[3]);case"ComponentsConfiguration":return this.stringValues[t][e[0]]+this.stringValues[t][e[1]]+this.stringValues[t][e[2]]+this.stringValues[t][e[3]];case"GPSVersionID":return e[0]+"."+e[1]+"."+e[2]+"."+e[3]}return String(e)},function(t){var e,i=t.tags,n=t.map;for(e in i)i.hasOwnProperty(e)&&(n[i[e]]=e)}(t.ExifMap.prototype),t.ExifMap.prototype.getAll=function(){var t,e,i={};for(t in this)this.hasOwnProperty(t)&&(e=this.tags[t],e&&(i[e]=this.getText(e)));return i}}),/*
 * jQuery File Upload Processing Plugin
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2012, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],t):t("object"==typeof exports?require("jquery"):window.jQuery)}(function(t){"use strict";var e=t.blueimp.fileupload.prototype.options.add;t.widget("blueimp.fileupload",t.blueimp.fileupload,{options:{processQueue:[],add:function(i,n){var o=t(this);n.process(function(){return o.fileupload("process",n)}),e.call(this,i,n)}},processActions:{},_processFile:function(e,i){var n=this,o=t.Deferred().resolveWith(n,[e]),s=o.promise();return this._trigger("process",null,e),t.each(e.processQueue,function(e,o){var r=function(e){return i.errorThrown?t.Deferred().rejectWith(n,[i]).promise():n.processActions[o.action].call(n,e,o)};s=s.pipe(r,o.always&&r)}),s.done(function(){n._trigger("processdone",null,e),n._trigger("processalways",null,e)}).fail(function(){n._trigger("processfail",null,e),n._trigger("processalways",null,e)}),s},_transformProcessQueue:function(e){var i=[];t.each(e.processQueue,function(){var n={},o=this.action,s=this.prefix===!0?o:this.prefix;t.each(this,function(i,o){"string"===t.type(o)&&"@"===o.charAt(0)?n[i]=e[o.slice(1)||(s?s+i.charAt(0).toUpperCase()+i.slice(1):i)]:n[i]=o}),i.push(n)}),e.processQueue=i},processing:function(){return this._processing},process:function(e){var i=this,n=t.extend({},this.options,e);return n.processQueue&&n.processQueue.length&&(this._transformProcessQueue(n),0===this._processing&&this._trigger("processstart"),t.each(e.files,function(o){var s=o?t.extend({},n):n,r=function(){return e.errorThrown?t.Deferred().rejectWith(i,[e]).promise():i._processFile(s,e)};s.index=o,i._processing+=1,i._processingQueue=i._processingQueue.pipe(r,r).always(function(){i._processing-=1,0===i._processing&&i._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=t.Deferred().resolveWith(this).promise()}})}),/*
 * jQuery File Upload Image Preview & Resize Plugin
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2013, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","load-image-meta","load-image-exif","canvas-to-blob","./jquery.fileupload-process"],t):"object"==typeof exports?t(require("jquery"),require("blueimp-load-image/js/load-image"),require("blueimp-load-image/js/load-image-meta"),require("blueimp-load-image/js/load-image-exif"),require("blueimp-canvas-to-blob"),require("./jquery.fileupload-process")):t(window.jQuery,window.loadImage)}(function(t,e){"use strict";t.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",disableImageHead:"@",disableExif:"@",disableExifThumbnail:"@",disableExifSub:"@",disableExifGps:"@",disabled:"@disableImageMetaDataLoad"},{action:"loadImage",prefix:!0,fileTypes:"@",maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",forceResize:"@",disabled:"@disableImageResize"},{action:"saveImage",quality:"@imageQuality",type:"@imageType",disabled:"@disableImageResize"},{action:"saveImageMetaData",disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},{action:"setImage",name:"@imagePreviewName",disabled:"@disableImagePreview"},{action:"deleteImageReferences",disabled:"@disableImageReferencesDeletion"}),t.widget("blueimp.fileupload",t.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png|svg\+xml)$/,loadImageMaxFileSize:1e7,imageMaxWidth:1920,imageMaxHeight:1080,imageOrientation:!1,imageCrop:!1,disableImageResize:!0,previewMaxWidth:80,previewMaxHeight:80,previewOrientation:!0,previewThumbnail:!0,previewCrop:!1,previewCanvas:!0},processActions:{loadImage:function(i,n){if(n.disabled)return i;var o=this,s=i.files[i.index],r=t.Deferred();return"number"===t.type(n.maxFileSize)&&s.size>n.maxFileSize||n.fileTypes&&!n.fileTypes.test(s.type)||!e(s,function(t){t.src&&(i.img=t),r.resolveWith(o,[i])},n)?i:r.promise()},resizeImage:function(i,n){if(n.disabled||!i.canvas&&!i.img)return i;n=t.extend({canvas:!0},n);var o,s=this,r=t.Deferred(),a=n.canvas&&i.canvas||i.img,l=function(t){t&&(t.width!==a.width||t.height!==a.height||n.forceResize)&&(i[t.getContext?"canvas":"img"]=t),i.preview=t,r.resolveWith(s,[i])};if(i.exif){if(n.orientation===!0&&(n.orientation=i.exif.get("Orientation")),n.thumbnail&&(o=i.exif.get("Thumbnail")))return e(o,l,n),r.promise();i.orientation?delete n.orientation:i.orientation=n.orientation}return a?(l(e.scale(a,n)),r.promise()):i},saveImage:function(e,i){if(!e.canvas||i.disabled)return e;var n=this,o=e.files[e.index],s=t.Deferred();return e.canvas.toBlob?(e.canvas.toBlob(function(t){t.name||(o.type===t.type?t.name=o.name:o.name&&(t.name=o.name.replace(/\.\w+$/,"."+t.type.substr(6)))),o.type!==t.type&&delete e.imageHead,e.files[e.index]=t,s.resolveWith(n,[e])},i.type||o.type,i.quality),s.promise()):e},loadImageMetaData:function(i,n){if(n.disabled)return i;var o=this,s=t.Deferred();return e.parseMetaData(i.files[i.index],function(e){t.extend(i,e),s.resolveWith(o,[i])},n),s.promise()},saveImageMetaData:function(t,e){if(!(t.imageHead&&t.canvas&&t.canvas.toBlob)||e.disabled)return t;var i=t.files[t.index],n=new Blob([t.imageHead,this._blobSlice.call(i,20)],{type:i.type});return n.name=i.name,t.files[t.index]=n,t},setImage:function(t,e){return t.preview&&!e.disabled&&(t.files[t.index][e.name||"preview"]=t.preview),t},deleteImageReferences:function(t,e){return e.disabled||(delete t.img,delete t.canvas,delete t.preview,delete t.imageHead),t}}})}),/*
 * jQuery File Upload Validation Plugin
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2013, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload-process"],t):t("object"==typeof exports?require("jquery"):window.jQuery)}(function(t){"use strict";t.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"}),t.widget("blueimp.fileupload",t.blueimp.fileupload,{options:{getNumberOfFiles:t.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(e,i){if(i.disabled)return e;var n,o=t.Deferred(),s=this.options,r=e.files[e.index];return(i.minFileSize||i.maxFileSize)&&(n=r.size),"number"===t.type(i.maxNumberOfFiles)&&(s.getNumberOfFiles()||0)+e.files.length>i.maxNumberOfFiles?r.error=s.i18n("maxNumberOfFiles"):!i.acceptFileTypes||i.acceptFileTypes.test(r.type)||i.acceptFileTypes.test(r.name)?n>i.maxFileSize?r.error=s.i18n("maxFileSize"):"number"===t.type(n)&&n<i.minFileSize?r.error=s.i18n("minFileSize"):delete r.error:r.error=s.i18n("acceptFileTypes"),r.error||e.files.error?(e.files.error=!0,o.rejectWith(this,[e])):o.resolveWith(this,[e]),o.promise()}}})});