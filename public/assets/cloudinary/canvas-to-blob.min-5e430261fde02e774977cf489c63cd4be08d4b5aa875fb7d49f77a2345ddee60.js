!function(t){"use strict";var e=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,i=t.Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}(),n=i&&t.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),o=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,s=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,r=(i||o)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(t){var e,r,a,l,h,u,c,d,p;if(e=t.match(s),!e)throw new Error("invalid data URI");for(r=e[2]?e[1]:"text/plain"+(e[3]||";charset=US-ASCII"),a=!!e[4],l=t.slice(e[0].length),h=a?atob(l):decodeURIComponent(l),u=new ArrayBuffer(h.length),c=new Uint8Array(u),d=0;d<h.length;d+=1)c[d]=h.charCodeAt(d);return i?new Blob([n?c:u],{type:r}):(p=new o,p.append(u),p.getBlob(r))};t.HTMLCanvasElement&&!e.toBlob&&(e.mozGetAsFile?e.toBlob=function(t,i,n){t(n&&e.toDataURL&&r?r(this.toDataURL(i,n)):this.mozGetAsFile("blob",i))}:e.toDataURL&&r&&(e.toBlob=function(t,e,i){t(r(this.toDataURL(e,i)))})),"function"==typeof define&&define.amd?define(function(){return r}):"object"==typeof module&&module.exports?module.exports=r:t.dataURLtoBlob=r}(window);